#!/usr/bin/env python
import argparse
import sys
sys.path.append('..')

from miniwan.wannet.wannet import WanNet
from mininet.cli import CLI
from mininet.log import setLogLevel


if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('-c', '--controller', help='Openflow controller', default='onos')
    parser.add_argument('-t', '--topology', help='topology file', default='../conf/b4.yaml')
    parser.add_argument('-p', '--protocol', help='routing protocol', choices=['bgp', 'ospf', 'openflow'],
                        default='ospf')
    parser.add_argument('-l', '--log', help='log level', choices=['info', 'debug'], default='info')

    args = parser.parse_args()

    setLogLevel(args.log)

    net = WanNet(topo_desc_file=args.topology, protocol=args.protocol, controller=args.controller)

    net.start()

    CLI(net)
    net.stop()
