#!/usr/bin/env python
import sys
sys.path.append('..')
import time

from miniwan.wannet.wannet import WanNet
from mininet.cli import CLI
from mininet.log import setLogLevel

LOG_LEVEL = 'info'

if __name__ == '__main__':
    setLogLevel(LOG_LEVEL)

    net = WanNet(topo_desc_file='../conf/loop.yaml')
    net.start()
    for router in net.switches:
        router.enable_route()
    print('wait 5 seconds...')
    time.sleep(5)
    for router in net.switches:
        router.start_route()
    net.pingAll(1)
    CLI(net)
    net.stop()
